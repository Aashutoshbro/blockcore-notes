<span *ngIf="feedService.events$ | async as events">
  <mat-progress-bar *ngIf="!events || events.length == 0" mode="indeterminate"></mat-progress-bar>

  <div class="feed-page">
    <mat-accordion class="options">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Options</mat-panel-title>
          <mat-panel-description>{{ activeOptions() }}</mat-panel-description>
        </mat-expansion-panel-header>
        <p>
          <mat-slide-toggle class="options-slider" [(ngModel)]="settings.options.paused">Pause feed</mat-slide-toggle>
          <mat-slide-toggle class="options-slider" [(ngModel)]="settings.options.hideSpam" (ngModelChange)="optionsUpdated()">Hide spam</mat-slide-toggle>
          <mat-slide-toggle class="options-slider" [(ngModel)]="settings.options.hideInvoice" (ngModelChange)="optionsUpdated()">Hide LN invoices</mat-slide-toggle>
        </p>
      </mat-expansion-panel>
    </mat-accordion>

    <div class="events" *ngFor="let event of events; trackBy: trackByFn">
      <app-profile-actions [event]="event"></app-profile-actions>
      <app-profile-header [pubkey]="event.pubkey"
        ><span class="event-date" [matTooltip]="event.id!" matTooltipPosition="below">{{ event.created_at | ago }}</span> <app-directory-icon [pubkey]="event.pubkey"></app-directory-icon
      ></app-profile-header>
      <div class="content">
        {{ event.content }}<span *ngIf="event.contentCut">... (message was truncated)</span>
        <div *ngIf="details">
          <br />
          <span *ngFor="let tag of event.tags" class="dimmed">TAG: {{ tag }}</span>
        </div>
      </div>
      <button *ngIf="!details" class="expand-button" mat-icon-button (click)="toggleDetails()">
        <mat-icon class="expand-button-icon">expand_more</mat-icon>
      </button>
      <button *ngIf="details" class="expand-button" mat-icon-button (click)="toggleDetails()">
        <mat-icon class="expand-button-icon">expand_less</mat-icon>
      </button>
    </div>
  </div>
</span>
